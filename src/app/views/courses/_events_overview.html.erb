<div style="overflow:hidden; -webkit-transition: all .5s ease; -moz-transition: all .5s ease; transition: all .5s ease;" id="course_events">

<% if @events.count == 0 %>  
   No events, yet.
<% else %> 
	<p class="pull-right">
      <% if can? :manage, @events %>
        <%= link_to 'Create new event', new_event_path, class: 'btn btn-small' %>
      <% end %>
    </p>
    </h2>

    <p class="hint"><%= link_to 'Show all events', events_path, class: 'link' %></p>
    <table class="table table-striped">
      <thead>
        <tr>
          <th>What?</th>
          <th>When?</th>
          <th>Course</th>
          <th>Lecturer</th>
          <th></th>
          <th></th>
          <th></th>
        </tr>
      </thead>

      <tbody>
      <% @events.each do |event| %>
        <tr>
          <td><b><%= link_to event.event_type.capitalize, event %></b></td>
          <td>
            <%= "#{l(event.beginDate, format: :long)}" %><br />
            <%= "From #{event.beginTime}" if event.beginTime.presence %><%= event.endTime.presence ? " to #{event.endTime}" : " (open end)" %>
          </td>
          <td><%= link_to event.course.name, event.course %></td>
          <td><%= event.tutor.full_name %></td>
          <% if can? :manage, event.course %>
            <td><%= link_to 'Edit', edit_event_path(event) %></td>
            <td><%= link_to 'Destroy', event, confirm: 'Are you sure?', method: :delete %></td>
          <% end %>
        </tr>
      <% end %>
      </tbody>
    </table>
<% end %>

</div>

