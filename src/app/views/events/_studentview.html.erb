<h2>Event <%= @event.event_type.capitalize %></h2>
<p>Course <%= link_to @event.course.name, @event.course %></p>

<%= render 'events/studentview_realtime_js_code' %>

<div class="row well-small">
		<table class="table table-striped">
			<tr>
				<td> <strong>Tutor</strong> </td>
				<td><%= @event.tutor.full_name  %></td>
			</tr>
			<tr>
				<td> <strong>Weekday</strong> </td>
				<td><%= @event.weekday %> in <%= @event.week %> </td>
			</tr>
			<tr>
				<td> <strong>Date</strong> </td>
				<td>
					<%= "#{l(@event.beginDate, format: :long)}" %><%= ", #{@event.beginTime.strftime('%H:%M')}" if @event.beginTime.presence %><%= @event.endTime.presence ? " - #{@event.endTime.strftime('%H:%M')}" : " (open end)" %>

				</td>
			</tr>
			<tr>
				<td> <strong>Place</strong> </td>
				<td><%= @event.building %> <%= @event.room %></td>
			</tr>
			<tr>
				<td> <strong>Website</strong> </td>
				<td><%= @event.url %></td>
			</tr>
		</table>
		</div>

<div style=" -webkit-transition: all .5s ease; -moz-transition: all .5s ease; transition: all .5s ease;" id="events-polls">
<div ng-app ng-controller="UserViewCtrl">
	<div class="row">
		<div>Folie {{slideId}}</div>
		<div class="span6"> 
			<div id="page">
				<header>
					<div id="icon"><img src="img/amcs_logo.png" alt="logo"></div>
					<div id="avatar"></div>
					<div id="stopIcon">
						<img class="hidden" id="stop" src="img/stop.png" alt="Disable Chat" title="Disable Chat">
					</div>
					<div id="status">
				<!--			<div id="slideStatus" style="float:left; padding: 0 3% 0 3%;"></div>    -->
					</div>

					<div id="logout"><img id="disconnect" alt="Logout" title="Logout" src ="img/logout.png"> </div>
				</header>

				<div id="memberContainer">
					<ul id="memberList"></ul>
				</div>

				<div id="chatContainer"></div>

				 <div id="inputContainer">
					<textArea id="input"></textArea>
				</div>
			</div>
				<button id="connect_room">Connect</button> 
				
			<!--  Login Dialog  -->

			<!--  Private Message Dialog  -->
			<div id="pmDialog" class="hidden">
					<textarea id="pmMessage"></textarea>	
			</div>

		</div>

		<div class="span4" id="mood">
			Geschwindigkeit 

			<div class="prof-control" id="speed">
				<span class="back"></span>
				<span class="left" ng-style="{width: (speed.down/2) +'%'}"></span>
				<span class="right" ng-style="{width: (speed.up/2) +'%'}"></span>
				<span class="center"></span>
				<button  ng-show="speed.canVote" class="btn btn-left" ng-click="submitControl('speed',-1)"> &lt; langsamer</button>
				<button  ng-show="speed.canVote" class="btn btn-right" ng-click="submitControl('speed',1)"> schneller &gt;</button>
				<span class="prof-control-ammount-left" >
					{{speed.down}} %
				</span>
				<span class="prof-control-ammount-right">
					{{speed.up}} %
				</span>
			</div>

			Lautstärke

			<div class="prof-control" id="volume">
				<span class="back"></span>
				<span class="left" ng-style="{width: (volume.down/2) +'%'}"></span>
				<span class="right" ng-style="{width: (volume.up/2) +'%'}"></span>
				<span class="center"></span>
				<button ng-show="volume.canVote"  class="btn btn-left" ng-click="submitControl('volume',-1)"> &lt; leiser</button>
				<button ng-show="volume.canVote"  class="btn btn-right" ng-click="submitControl('volume',1)"> lauter &gt;</button>
				<span class="prof-control-ammount-left" >
					{{volume.down}} %
				</span>
				<span class="prof-control-ammount-right">
					{{volume.up}} %
				</span>
			</div>

			Verständlichkeit

			<div class="prof-control" id="comprehensibility">
				<span class="back"></span>
				<span class="left" ng-style="{width: (comprehensibility.down/2) +'%'}"></span>
				<span class="right" ng-style="{width: (comprehensibility.up/2) +'%'}"></span>
				<span class="center"></span>
				<button ng-show="comprehensibility.canVote" class="btn btn-left" ng-click="submitControl('comprehensibility',-1)"> &lt; nochmal</button>
				<button ng-show="comprehensibility.canVote"  class="btn btn-right" ng-click="submitControl('comprehensibility',1)"> weiter &gt;</button>
				<span class="prof-control-ammount-left" >
					{{comprehensibility.down}} %
				</span>
				<span class="prof-control-ammount-right">
					{{comprehensibility.up}} %
				</span>
			</div>
		</div>
		<style type="text/css">
			/* prof controls TODO @shirin: plz outsource in some css file; */
			#mood {
				position:relative;
			}
			
			#mood .prof-control {
				position: relative;
				height:40px;
			}
			
			#mood .btn-left {
				position: absolute;
				padding: 0 9px;
				line-height: 16px;
				top: 17px;
				left:0px;
				width: 50%;
				text-align: left;
				border-top-left-radius: 0;
				border-top-right-radius: 0;
				border-bottom-right-radius: 0;
			} 

			#mood .btn-right {
				position: absolute;
				padding: 0 9px;
				line-height: 16px;
				right:0px;
				top: 17px;
				width: 50%;
				text-align: right;
				border-top-right-radius: 0;
				border-top-left-radius: 0;
				border-bottom-left-radius: 0;
			} 
			
			

			#mood .prof-control-ammount-left {
				position: absolute;
				line-height: 16px;
				color: #fff;
				left: 20px;
			}

			#mood .prof-control-ammount-right {
				position: absolute;
				line-height: 16px;
				color: #fff;
				right: 20px;
			}



			#mood .back {
				position: absolute;
				width: 100%;
				height: 17px;
				background-color: rgba(200,200,200,0.666);
				border-radius: 4px;
				border-bottom-right-radius: 0;
				border-bottom-left-radius: 0;
			}

			#mood .right {
				position: absolute;
				height: 10px;
				top: 3px;
				left:50%;
				background-color: #0f0;
				-webkit-transition: width 1s ease-in-out;
			    -moz-transition: width 1s ease-in-out;
			    -o-transition: width 1s ease-in-out;
			    transition: width 1s ease-in-out;
			}
			

			#mood .left {
				position: absolute;
				height: 10px;
				top: 3px;
				right:50%;
				background-color: #f00;
				-webkit-transition: width 1s ease-in-out;
			    -moz-transition: width 1s ease-in-out;
			    -o-transition: width 1s ease-in-out;
			    transition: width 1s ease-in-out;
			}

			#mood .center {
				position: absolute;
				height: 17px;
				width: 2px;
				right: 50%;
				margin-right: -1px;
				background-color: #fff;
			}

		</style>
	</div>
	<div class="row">
		<div class="span6" id="polls"> 
			Fragen/Nachrichten:
			<div ng-show="pollslength > 1">

				<span ng-click="decrementActivePoll()"> &lt;</span>
				<span>
					{{activePoll + 1}}
				</span>
				|
				<span>{{pollslength}}</span>
				<span ng-click="incrementActivePoll()"> &gt;</span>
			</div>

			<div ng-repeat="(key, poll) in polls" ng-show="$index == activePoll">
				<h3>{{poll.questiontext}}</h3>
				<div ng-repeat="msg in poll.messages" ng-switch="msg.type">
					<div ng-switch-when="0" class="alert alert-error">
						<span ng-click="closeMessage(poll,$index,msg)" class="close">[x]</span>
						<b>Falsch: </b>{{msg.text}}
					</div>
					<div ng-switch-when="1" class="alert alert-success">
						<span ng-click="closeMessage(poll,$index,msg)" class="close">[x]</span>
						<b>Richtig!: </b>{{msg.text}}
					</div>
					<div ng-switch-when="2" class="alert alert-info">
						<span ng-click="closeMessage(poll,$index,msg)" class="close">[x]</span>
						{{msg.text}}
					</div>
				</div>
				<ul>
					<li style="list-style-type: lower-alpha;" ng-repeat="c in poll.choices | orderBy:'position'">
						<input type="radio" ng-model="poll.choice_id" value="{{c.id}}" name="choice"/>
						{{c.answertext}}
					</li>
				</ul>
				<button ng-show="poll.choices.length != 0" ng-click="submitPoll(poll.choice_id, key)" class="btn btn-primary">submit</button>
			</div>
			<p ng-show="pollslength == 0">
				Zur Zeit keine Fragen
			</p>
		</div>
		<div class="span4" id="results">
			Ergebnisse:
			<div ng-show="results.length > 1">

				<span ng-click="decrementActiveResult()"> &lt;</span>
				<span>
					{{activeResult + 1}}
				</span>
				|
				<span>{{results.length}}</span>
				<span ng-click="incrementActiveResult()"> &gt;</span>
			</div>
			<div  ng-style="{ height : resHeight($index,activeResult) }" style="overflow:hidden" ng-repeat="p in results">
				<h3>{{p.text}}</h3>
				<span class="sparklines pull-right" tooltip="{{p.tooltip}}" values="{{p.pie}}" decisive="{{p.decisive}}"></span>
				<ul>
					<li style="list-style-type: lower-alpha;" ng-repeat="c in p.choices">
						{{c.text}}
					</li>
				</ul>
			</div>
			<p ng-show="results.length == 0">
				Zur Zeit keine Ergebnisse
			</p>
		</div>
	</div>
</div>
<script>
	
</script>
<style>










.hidden{
    display: none;
}

header, #chatContainer, #inputContainer textarea:hover, #memberContainer ul#memberList li div.member {
	background: #eee;
}

header div#logout img#disconnect:hover, #memberContainer ul#memberList li div.member:hover, ul#feedback li:hover,
header div#stopIcon img#stop:hover, img#go {
    cursor: pointer;
}

header  img, #memberContainer ul#memberList li div.image  img {
    width: 100%;
    height: 100%;
}

/* Dialog Styles*/

div#loginDialog label {
    display: block;
}

textarea#pmMessage {
    width: 100%;
    height: 100%;
    resize: none;
}

/* END Dialog Styles*/
/* Header */

header {
	margin: 0 0 2% 0;
	padding: 2px 0 2px 0;
	width: auto;
    height: 35px;
}

header > div {
	float: left;
}

header div#icon, header div#logout, header div#stopIcon{
	height: 100%;
    width: 5%;
}

header div#avatar {
    width: 20%;
    margin: 10px 1% 0 1%;
}

header div#stopIcon img#stop {
	height: 35px;
 	max-width: 35px;
	padding: 2px;	
}

header div#status {
    width: 61%;
    margin: 10px 1% 0 1%;
}

header div#logout img#disconnect{
 	height: 25px;
 	max-width: 20px;
	float: right;
	padding: 5px;		
}

/* END Header */
/* Basic Layout */

#page {
    margin: 0 auto;
    width: 100%;
    height: 100%;
    min-width: 650px;
    min-height: 400px;
}

#chatContainer, #memberContainer {
    height: 70%;
    border: 1px solid #3B5998;
	overflow: auto;
	padding: 0.5%;
	margin-bottom: 1%;
}

#chatContainer {	
    width: auto;
    word-wrap: break-word;   
}

#memberContainer {
	margin-left: 25px;
    width: 220px;
    float: right;	
}

#inputContainer{
    clear: both;
    width: 100%;
	float: bottom;
}

#inputContainer{
    height: 10%;
}

#inputContainer textarea {
	width: 99%;
	height: 99%;
    border: thin solid #3B5998;
    border-radius: 10px;
    resize: none;
    overflow: auto;	
	padding: 0.5%;
}

/* END Basic Layout */
/* ChatContainer Elements */

#chatContainer div {
    font-size: 90%;
}

#chatContainer div.message {
    padding: 2px;
    margin: 8px;
    background: white;
}

#chatContainer div.message div.head {
    color: #3B5998;
    font-style:italic;
}

#chatContainer div.private div.body {
    background: #3B5998;
    color: white;
}

/* END ChatContainer Elements */
/* MemberContainer Elements */

#memberContainer ul#memberList {
    list-style-type: none;
    width: 100%;
    padding: 0;
    margin: 0;
}

#memberContainer ul#memberList li div.member {
    width: 100%;
	height: 30px;
    float: left;
    margin-bottom: 1.5%;
}

#memberContainer ul#memberList li div.image {
    float: left; 
    width: 15%; 
    height: 100%; 
    margin-right: 2%;
}

#memberContainer ul#memberList li div.nick {
    float: left;
    width: 83%;
	padding: 2% 0;
}

#memberContainer ul#memberList li div.member:hover {
    background-color: white;
}

/* END MemberContainer Elements */

</style>
