<script src="/assets/sparklines.js"></script>

<h2> <%= @event.event_type.capitalize  %> on <%= @event.beginDate %> </h2>

<div class="row">
	

		<h3> Description </h3>
		<table class="show_table">
			<tr class="show_tr">
				
				<td class="show_td"><h3><%= @event.course.name %></h3></td>
			</tr>
			<tr class="show_tr">
				<td class="show_td"> <strong>Tutor</strong> </td>
				<td><%= @event.tutor.full_name  %></td>
			</tr>
			<tr class="show_tr">
				<td class="show_td"> <strong>Weekday</strong> </td>
				<td><%= @event.weekday %> in <%= @event.week %> </td>
			</tr>
			<tr class="show_tr">
				<td class="show_td"> <strong>Date</strong> </td>
				<td>
					<% if @event.beginDate == @event.endDate %>
  						<%= @event.beginDate %>
					<% else %>
  						<%= "from #{@event.beginDate} to #{@event.endDate}" %> 
					<% end %>
				</td>
			</tr>
			<tr class="show_tr">
				<td class="show_td"> <strong>Place</strong> </td>
				<td><%= @event.building %> <%= @event.room %></td>
			</tr>
			<tr class="show_tr">
				<td class="show_td"> <strong>Website</strong> </td>
				<td><%= @event.url %></td>
			</tr>
			
							
			
		</table>
		<table>
		<tr>
		<% if can? :manage, @course%>

    				<td class="show_btn"><%= link_to content_tag('span', ' Add new event', :class=> 'icon-plus'), new_event_path()  %></td>
    				<td class="show_btn"><%= link_to content_tag('span', ' edit event', :class=>'icon-edit'), edit_event_path(@event) %></td>
    				<td class="show_btn"><%= link_to content_tag('span', ' delete event', :class=>'icon-trash'), @event, confirm: 'Are you sure that you want to delete this event?', method: :delete %></td>
    				<td class="show_btn"><%= link_to 'All events', events_path %></td>
					<td class="show_btn"><%= link_to "Go to all Courses", courses_path %></td>
					<td class="show_btn" id="create_room"><a href="javascript:void(0)">Start Chat</a></td>
		<% end %>
		</tr>
		</table>
      <!-- end of span4 or span12 -->


  </div>  <!-- end of row -->


<h3>Polls</h3>



<% if can? :manage, @course %>
	<div class="pull-right">
		<%= link_to content_tag('span', 'add new poll', :class=>'icon-plus') , new_poll_path  %> 
	</div>
<% end %>

<% if @event.polls.count == 0 %>
	<p> no polls yet </p>
<% end %>

	<% @event.polls.each do |poll| %>

		<div class="row">
			<div class="span6">
					<h4><%= poll.questiontext %></h4>
					<% if can? :manage, @course %>
						<div class="pull-right">
							
							<% if poll.poll_enabled == true %>
    						<%= link_to content_tag('span', 'disable', :class=> 'icon-lock'), toggle_visibility_of_poll_path(poll) %>
    						<% else %>
    						<%= link_to content_tag('span', 'enable', :class=> 'icon-unlock'), toggle_visibility_of_poll_path(poll) %>    						
    						<% end %>

							<%= link_to content_tag('span', 'edit', :class=>'icon-edit') , edit_poll_path(poll)  %> &nbsp; &nbsp;
							<%= link_to content_tag('span', 'delete', :class=>'icon-trash'), poll, confirm: 'Are you sure that you want to delete this poll?', method: :delete %>
						</div>
					<% end %>
					<ol type="a">
					<% poll.choices.each do |choice| %>
						<li><%= choice.answertext %></li>
					<% end %>
				</ol>
			</div>
			<div class="span6">
				<h4> Result </h4>
				<% if can? :manage, @course %>
						<div class="pull-right">
							<% if poll.result_enabled == true %>
    						<%= link_to content_tag('span', 'disable', :class=> 'icon-lock'), toggle_visibility_of_result_path(poll) %>
    						<% else %>
    						<%= link_to content_tag('span', 'enable', :class=> 'icon-unlock'), toggle_visibility_of_result_path(poll) %>    						
    						<% end %>

						</div>
				<% end %>
				<div class="poll-result" id='<%= "poll_result_#{poll.id}" %>'>

				</div>
			</div>
		</div>  <!-- end of row -->
	<% end %>  <!-- end of each -->
<div id="loginDialog">
	<div id="login_user"><label>User:</label><input type="text" id="jid"></div>
	<div id="login_pw"><label>Password:</label> <input type="password" id="password"></div>
	<div id="login_nick"><label>Nickname:</label> <input type="text" id="nickname"></div>
</div>

<style>
.hidden{
    display: none;
}

#loginDialog{
	display:none;
}

header, #chatContainer, #inputContainer textarea:hover, #memberContainer ul#memberList li div.member {
	background: #eee;
}

header div#logout img#disconnect:hover, #memberContainer ul#memberList li div.member:hover, ul#feedback li:hover,
header div#stopIcon img#stop:hover, img#go {
    cursor: pointer;
}

header  img, #memberContainer ul#memberList li div.image  img {
    width: 100%;
    height: 100%;
}

/* Dialog Styles*/

div#loginDialog label {
    display: block;
}

textarea#pmMessage {
    width: 100%;
    height: 100%;
    resize: none;
}

/* END Dialog Styles*/
/* Header */

header {
	margin: 0 0 2% 0;
	padding: 2px 0 2px 0;
	width: auto;
    height: 35px;
}

header > div {
	float: left;
}

header div#icon, header div#logout, header div#stopIcon{
	height: 100%;
    width: 5%;
}

header div#avatar {
    width: 20%;
    margin: 10px 1% 0 1%;
}

header div#stopIcon img#stop {
	height: 35px;
 	max-width: 35px;
	padding: 2px;	
}

header div#status {
    width: 61%;
    margin: 10px 1% 0 1%;
}

header div#logout img#disconnect{
 	height: 25px;
 	max-width: 20px;
	float: right;
	padding: 5px;		
}

/* END Header */
/* Basic Layout */

#page {
    margin: 0 auto;
    width: 100%;
    height: 100%;
    min-width: 650px;
    min-height: 400px;
}

#chatContainer, #memberContainer {
    height: 70%;
    border: 1px solid #3B5998;
	overflow: auto;
	padding: 0.5%;
	margin-bottom: 1%;
}

#chatContainer {	
    width: auto;
    word-wrap: break-word;   
}

#memberContainer {
	margin-left: 25px;
    width: 220px;
    float: right;	
}

#inputContainer{
    clear: both;
    width: 100%;
	float: bottom;
}

#inputContainer{
    height: 10%;
}

#inputContainer textarea {
	width: 99%;
	height: 99%;
    border: thin solid #3B5998;
    border-radius: 10px;
    resize: none;
    overflow: auto;	
	padding: 0.5%;
}

/* END Basic Layout */
/* ChatContainer Elements */

#chatContainer div {
    font-size: 90%;
}

#chatContainer div.message {
    padding: 2px;
    margin: 8px;
    background: white;
}

#chatContainer div.message div.head {
    color: #3B5998;
    font-style:italic;
}

#chatContainer div.private div.body {
    background: #3B5998;
    color: white;
}

/* END ChatContainer Elements */
/* MemberContainer Elements */

#memberContainer ul#memberList {
    list-style-type: none;
    width: 100%;
    padding: 0;
    margin: 0;
}

#memberContainer ul#memberList li div.member {
    width: 100%;
	height: 30px;
    float: left;
    margin-bottom: 1.5%;
}

#memberContainer ul#memberList li div.image {
    float: left; 
    width: 15%; 
    height: 100%; 
    margin-right: 2%;
}

#memberContainer ul#memberList li div.nick {
    float: left;
    width: 83%;
	padding: 2% 0;
}

#memberContainer ul#memberList li div.member:hover {
    background-color: white;
}

.ui-dialog .ui-dialog-titlebar-close{
	margin: -12px 0 0 0;
	height: auto;
}


/* END MemberContainer Elements */

</style>